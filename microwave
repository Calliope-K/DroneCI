#!/bin/bash
# your code goes here
# git clone https://github.com/vcyzteen/linux.git -b 4.4-rev
# cd linux
# git cherry-pick 85e4fcfe0f5bf2285e78aa22efb54bda0209732a 85e4fcfe0f5bf2285e78aa22efb54bda0209732a d9c36fd359b6f957293f7e5fc6b49bd67012d919 0d66d4b3b3fb003cffb6d78f212ddc709be911e8 404194e40d242b85d05415f954ae90fee1392af3 81c6cf71fa87aedaca8bd2ac433def4da94a9a85
# git push https://$GITHUB_TOKEN@github.com/vcyzteen/linux.git
# wget https://raw.githubusercontent.com/vcyzteen/myscripts/testgcc/kernel.sh
# bash kernel.sh
# git clone https://$GITHUB_TOKEN@github.com/vcyzteen/gcc-build.git
git clone https://github.com/vcyzteen/gcc-arm64-4.9.git ../gcc-arm64 -b neko
rm -rf ../gcc-arm64/*
wget https://raw.githubusercontent.com/vcyzteen/gcc-build/main/build-gcc.sh?token=$GITHUB_TOKEN
chmod +x build-gcc.sh
./build-gcc.sh -a arm64
cd ../gcc-arm64
./bin/aarch64-linux-gnu-gcc -v 2>&1 | tee /tmp/gcc-arm64-version
./bin/aarch64-linux-gnu-ld.bfd -v 2>&1 | tee /tmp/bfd-arm64-version
git init
git add . -f
git commit -as -m "Import GCC: ${{ steps.get-date.outputs.date }}" -m "Build completed on: $(/bin/date)" -m "Configuration: $(/bin/cat /tmp/gcc-arm64-version)" -m "BFD: $(/bin/cat /tmp/bfd-arm64-version)"
git gc
git push https://$GITHUB_TOKEN@github.com/vcyzteen/gcc-arm64-4.9.git neko -f
